<html><head><title>html模版</title></head><body>Unity - Manual:  Placing Light Probes</br>
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual (2018.1 beta)</a></li>
<li><a href="Graphics.html">Graphics</a></li>
<li><a href="GraphicsOverview.html">Graphics Overview</a></li>
<li><a href="LightingOverview.html">Lighting</a></li>
<li><a href="GIIntro.html">Global Illumination</a></li>
<li><a href="LightProbes.html"> Light Probes</a></li>
<li> Placing Light Probes</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="LightProbes-TechnicalInformation.html"></a></span><div class="tip"> Light Probes: Technical information</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="LightProbes-Placing-Scripting.html"></a></span><div class="tip"> Placing probes using scripting</div>
</div>
</div></div>
<div class="otherversionswrapper" onmouseover="setOtherVersionsDisplay(true)" onmouseout="setOtherVersionsDisplay(false)">
<a>Other Versions</a><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">Cannot access other versions offline!</div>
</div>
<div class="scrollToFeedback"><a id="scrollToFeedback">Leave feedback</a></div>
<h1>Placing Light Probes</h1>
<!--BeginSwitchLink--><a href='../ScriptReference/LightProbeGroup.html' title='Go to LightProbeGroup page in the Scripting Reference' class='switch-link gray-btn sbtn left'>Switch to Scripting</a><!--EndSwitchLink-->
<div class="clear"></div>

<p>To place Light Probes in your scene, you must use a GameObject with a <strong>Light Probe Group</strong> component attached. You can add a Light Probe Group component from the menu: <strong>Component -&gt; Rendering -&gt; Light Probe Group</strong>.</p>

<p>The Light Probe Group component can be added to any object in the scene, however it’s best to add it to a new empty GameObject.</p>

<figure>
<img src="../uploads/Main/class-LightProbeGroup-7.png" alt="The Light Probe Group component">
<figcaption>The Light Probe Group component</figcaption>
</figure>

<p>The Light Probe Group has its own <strong>Edit Mode </strong>which can be turned on or off. To add, move, or delete light probes, you must switch the Light Probe Group’s edit mode on by pressing the <strong>Edit Light Probes </strong>button:</p>

<figure>
<img src="../uploads/Main/class-LightProbeGroup-8.png" alt="The Edit Light Probes button">
<figcaption>The Edit Light Probes button</figcaption>
</figure>

<p>When you are using the Edit Light Probes mode, you can manupulate individual light probes as in a similar way to GameObjects, however the individual probes are not GameObjects - they are stored as a set of points in the Light Probe Group component.</p>

<p>When you begin editing a new Light Probe Group, you will start off with a default formation of eight probes arranged in a cube, as shown below:</p>

<figure>
<img src="../uploads/Main/class-LightProbeGroup-9.png" alt="The default arrangement of light probes.">
<figcaption>The default arrangement of light probes.</figcaption>
</figure>

<p>You can now use the controls in the Light Probe Group inspector to add new probe positions to the group. The probes appear in the scene as yellow spheres which can be positioned in the same manner as GameObjects. You can also select and duplicate individual probes or in groups, by using the usual “duplicate” keyboard shortcut (ctrl+d/cmd+d).</p>

<p>Remember to switch the Light Probe Group edit mode <strong>off</strong> once you’ve finished editing the probes, or you will find you cannot move or manipulate normal GameObjects!</p>

<h2>Choosing Light Probe positions</h2>

<p>Unlike lightmaps, which usually have a continuous resolution across the surface of an object, the resolution of the light probe information is entirely defined by how closely packed you choose to position the probes.</p>

<p>To optimise the amount of data that is stored by light probes, and the amount of computation done while the game is playing, you should generally attempt to place as few light probes as possible. However, you should also place enough probes that changes in light from one space to another are recorded at a level that is acceptable to you. This means you might place light probes in a more condensed pattern around areas that have complex or highly contrasting light, and you might place them in a much more spread out pattern over areas where the light does not significantly change.</p>

<figure>
<img src="../uploads/Main/class-LightProbeGroup-10.png" alt="Light probes placed with varying density around a simple scene">
<figcaption>Light probes placed with varying density around a simple scene</figcaption>
</figure>

<p>In the example above, the probes are placed more densely near and between the buildings where there is more contrast and color variation, and less densely along the road, where the lighting does not significantly change.</p>

<p>The simplest approach to positioning probes is to arrange them in a regular 3D grid pattern. While this setup is simple and effective, it is likely to consume more memory than necessary, and you may have lots of redunant probes. For example, in the scene above, if there were lots of probes placed along the road it would be a waste of resources. The light does not change much along the length of the road, so many probes would be storing almost identical lighting data to their neighbouring probes. In situations like this, it is much more efficient to interpolate this lighting data between fewer more spread-out probes.</p>

<p>Light probes individually do not store a large amount of information. From a technical perspective, each probe is a spherical, panoramic HDR image of the view from the sample point, encoded using Spherical Harmonics L2 which is stored as 27 floating point values. However in large scenes with hundreds of probes they can add up, and having unnecessarily densely packed probes can result in large amounts of wasted memory in your game.</p>

<h2>Creating a volume</h2>

<p>Even if your gameplay takes place on a 2D plane (for example, cars driving around on a road surface), your light probes must form a 3D volume.</p>

<p>This means you should have at least two vertical “layers” of points in your group of probes.</p>

<p>In the example below, you can see on the left the probes are arranged only across the surface of the ground. This will <strong>not result in good lighting</strong> because the light probe system will not be able to calculat sensible tetrahedral volumes from the probes.</p>

<p>On the right, the probes are arranged in two layers, some low to the ground and others higher up, so that together they form a 3D volume made up of lots of individual tetrahedra. This is a <strong>good </strong>layout.</p>

<figure>
<img src="../uploads/Main/class-LightProbeGroup-11.png" alt="The left image shows a bad choice of light probe positions, because there is no height to the volume defined by the probes. The right image shows a good choice of light probe positions.">
<figcaption>The left image shows a bad choice of light probe positions, because there is no height to the volume defined by the probes. The right image shows a good choice of light probe positions.</figcaption>
</figure>

<h2>Light Probe placement for dynamic GI</h2>

<p>Unity’s realtime GI allows moving lights to cast dynamic bounced light against your <strong>static</strong> scenery. However, you can also receive dynamic bounced light from moving lights on <strong>moving GameObjects </strong>when you are using llight probes.</p>

<p>Light Probes therefore perform two very similar but distinct functions - they store static baked light, and at runtime they represent sampling points for dynamic realtime global illumination (GI, or bounced light) to affect the lighting on moving objects.</p>

<p>Therefore, if you are using dynamic moving lights, and want realtime bounced light on your moving GameObjects, this may have implications on your choice of where you place your light probes, and how densely you group them.</p>

<p>The main point to consider in this situation is that in large areas of relatively unchanging <em>static light</em> you might have placed only a few probes - because the light does not change across a wide area. However, if you plan to have <em>moving lights</em> within this area, and you want moving objects to receive bounced light from them, you will need a more dense network of light probes within the area so that there is a high enough level of accuracy to match your light’s range and style.</p>

<p>How densely placed your probes need to be will vary depending on the size and range of your lights, how fast they move, and how large the moving objects are that you want to receive bounced light.</p>

<h2>Light Probe placement problems</h2>

<p>Your choice of light probe positions must take into account that the lighting will be interpolated between sets of probes. Problems can arise if your probes don’t adequately cover the changes in lighting across your scene.</p>

<p>The example below shows a night-time scene with two bright street lamps on either side, and a dark area in the middle. If light probes are only placed near the street lamps, and none in the dark area, the lighting from the lamps will “bleed” across the dark gap, on moving objects. This is because the lighting is being interpolated from one bright point to another, with no information about the dark area in-between.</p>

<figure>
<img src="../uploads/Main/class-LightProbeGroup-12.png" alt="This image shows poor light probe placement. There are no probes in the dark area between the two lamps, so the dark area will not be included in the interpolation at all.">
<figcaption>This image shows poor light probe placement. There are no probes in the dark area between the two lamps, so the dark area will not be included in the interpolation at all.</figcaption>
</figure>

<p>If you are using realtime or mixed lights, this problem may be less noticable, because only the <em>indirect</em> light will bleed across the gap. The problem is more noticable if you are using fully baked lights, because in this situation the direct light on moving objects is also interpolated from the light probes. In this example scene the two lamps are baked, so moving objects get their direct light from light probes. Here you can see the result - a moving object (the ambulance) remains brightly lit while passing through the dark area, which is not the desired effect. The yellow wireframe tetrahedron shows that the interpolation is occuring between one brightly lit end of the street to the other.</p>

<figure>
<img src="../uploads/Main/class-LightProbeGroup-13.png" alt="">
</figure>

<p>This is an undesired effect - the ambulance remains brightly lit while passing through a dark area, because no light probes were placed in the dark area.</p>

<p>To solve this, you should place more probes in the dark area, as shown below:</p>

<figure>
<img src="../uploads/Main/class-LightProbeGroup-14.png" alt="">
</figure>

<p>Now the scene has probes in the dark area too. And as a result, the moving ambulance takes on the darker lighting as it travels from one side of the scene to the other.</p>

<figure>
<img src="../uploads/Main/class-LightProbeGroup-15.png" alt="">
</figure>

<p>The ambulance now takes on the darker lighting in the centre of the scene, as desired.</p>

<hr>

<ul>
<li><p><span class="page-edit"> 2017–06–08 Page published with no <a href="DocumentationEditorialReview.html">editorial review</a>
</span></p></li>
<li><p><span class="page-history">Light Probes updated in 5.6</span></p></li>
</ul>
<div class="feedbackbox" id="feedbackbox">
<div id="rating"><p>Did you find this page useful? Please give it a rating:<br><div id="ratecontent" class="c-rating"></div>
</p></div>
<div id="ratingThanks" style="display:none"><p>Thanks for rating this page!</p></div>
<div id="problem"><p><a name="problem" onclick="document.getElementById('problemType').style.display = '';document.getElementById('problem').style.display = 'none';">Report a problem on this page</a></p></div>
<div id="problemType" style="display:none"><p>What kind of problem would you like to report?<ul type="problems">
<li><a name="needcode" onclick="                                                             document.getElementById('problemType').style.display = 'none';                                                             document.getElementById('problemThanks').style.display = '';                                                             SendFeedback('problem-needcode',window.location.href,0);                                                             document.getElementById('problemFormDescription').value='Needs code samples.';                                                             document.getElementById('problemNeedCodeForm').style.display = ''                                                         ">This page needs code samples</a></li>
<li><a name="code" onclick="document.getElementById('problemType').style.display = 'none';                                                         document.getElementById('problemThanks').style.display = '';                                                         SendFeedback('problem-brokencode',window.location.href,0);                                                         document.getElementById('problemFormDescription').value='Code samples do not work.';                                                         document.getElementById('problemCodeForm').style.display = ''                                                         ">Code samples do not work</a></li>
<li><a name="missing" onclick="document.getElementById('problemType').style.display = 'none';                                                         document.getElementById('problemThanks').style.display = '';                                                         SendFeedback('problem-missing',window.location.href,0);                                                         document.getElementById('problemFormDescription').value='Missing information';                                                         document.getElementById('problemMissingForm').style.display = ''                                                         ">Information is missing</a></li>
<li><a name="incorrect" onclick="document.getElementById('problemType').style.display = 'none';                                                         document.getElementById('problemThanks').style.display = '';                                                         SendFeedback('problem-incorrect',window.location.href,0);                                                         document.getElementById('problemFormDescription').value='Incorrect information';                                                         document.getElementById('problemIncorrectForm').style.display = ''                                                         ">Information is incorrect</a></li>
<li><a name="unclear" onclick="document.getElementById('problemType').style.display = 'none';                                                         document.getElementById('problemThanks').style.display = '';                                                         SendFeedback('problem-unclear',window.location.href,0);                                                         document.getElementById('problemFormDescription').value='Unclear or confusing information';                                                         document.getElementById('problemUnclearForm').style.display = ''                                                         ">Information is unclear or confusing</a></li>
<li><a name="language" onclick="document.getElementById('problemType').style.display = 'none';                                                         document.getElementById('problemThanks').style.display = '';                                                         SendFeedback('problem-language',window.location.href,0);                                                         document.getElementById('problemFormDescription').value='Spelling or grammar error';                                                         document.getElementById('problemLanguageForm').style.display = ''                                                         ">There is a spelling/grammar error on this page</a></li>
<li><a name="other" onclick="document.getElementById('problemType').style.display = 'none';                                                         document.getElementById('problemThanks').style.display = '';                                                         SendFeedback('problem-other',window.location.href,0);                                                         document.getElementById('problemFormDescription').value='This page has a problem';                                                         document.getElementById('problemOtherForm').style.display = ''                                                         ">Something else</a></li>
</ul>
<p><known_issues><p>Is something described here not working as you expect it to? It might be a <b>Known Issue</b>. Please check with the Issue Tracker at <a href="https://issuetracker.unity3d.com">issuetracker.unity3d.com</a>.</p></known_issues></p>
</p></div>
<div id="problemThanks" style="display:none"><p>Thanks for letting us know! This page has been marked for review based on your feedback.<br><br>If you have time, you can provide more information to help us fix the problem faster.<br><br><a onclick="document.getElementById('problemMoreInfo').style.display = '';document.getElementById('problemThanks').style.display = 'none';">Provide more information</a><br>
</p></div>
<div id="problemMoreInfo" style="display:none">
<p id="problemNeedCodeForm" style="display:none">You've told us this page needs code samples. If you'd like to help us further, you could provide a code sample, or tell us about what kind of code sample you'd like to see:</p>
<p id="problemCodeForm" style="display:none">You've told us there are code samples on this page which don't work. If you know how to fix it, or have something better we could use instead, please let us know:</p>
<p id="problemMissingForm" style="display:none">You've told us there is information missing from this page. Please tell us more about what's missing:</p>
<p id="problemIncorrectForm" style="display:none">You've told us there is incorrect information on this page. If you know what we should change to make it correct, please tell us:</p>
<p id="problemUnclearForm" style="display:none">You've told us this page has unclear or confusing information. Please tell us more about what you found unclear or confusing, or let us know how we could make it clearer:</p>
<p id="problemLanguageForm" style="display:none">You've told us there is a spelling or grammar error on this page. Please tell us what's wrong:</p>
<p id="problemOtherForm" style="display:none">You've told us this page has a problem. Please tell us more about what's wrong:</p>
<form>
<textarea id="problemFormSuggestionField" cols="40" rows="5"></textarea><input type="hidden" id="problemFormDescription"><input type="submit" id="problemFormDescriptionSubmit" value="Submit" onclick="                                             document.getElementById('problemMoreInfo').style.display = 'none';                                             document.getElementById('problemMoreInfoThanks').style.display = '';                                             return false;                                             ">
</form>
</div>
<div id="problemMoreInfoThanks" style="display:none"><p>Thanks for helping to make the Unity documentation better!</p></div>
<script>

                                            var ratecontent = document.querySelector('#ratecontent'); // target element
                                            var currentRating = 0; // initial rating
                                            var maxRating= 5; // max rating

                                            // callback to run after setting the rating
                                            var callback = function(rating) {
                                                document.getElementById('ratingThanks').style.display = '';
                                                document.getElementById('ratecontent').style.display = 'none';
                                                document.getElementById('rating').style.display = 'none';
                                                SendFeedback("rating",window.location.href,rating);
                                            };

                                            // rating instance
                                            var myRating = rating(ratecontent, currentRating, maxRating, callback);
                                        </script>
</div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="LightProbes-TechnicalInformation.html"></a></span><div class="tip"> Light Probes: Technical information</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="LightProbes-Placing-Scripting.html"></a></span><div class="tip"> Placing probes using scripting</div>
</div>
</div>
</div>
</body></html>