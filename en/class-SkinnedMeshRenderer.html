<html><head><title>html模版</title></head><body>Unity - Manual: Skinned Mesh Renderer [DRAFT] </br>
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual (2018.1 beta)</a></li>
<li><a href="Graphics.html">Graphics</a></li>
<li><a href="GraphicsReference.html">Graphics Reference</a></li>
<li><a href="comp-MeshGroup.html">Mesh Components</a></li>
<li>Skinned Mesh Renderer [DRAFT] </li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="class-MeshRenderer.html"></a></span><div class="tip"> Mesh Renderer</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="class-TextMesh.html"></a></span><div class="tip">Text Mesh</div>
</div>
</div></div>
<div class="otherversionswrapper" onmouseover="setOtherVersionsDisplay(true)" onmouseout="setOtherVersionsDisplay(false)">
<a>Other Versions</a><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">Cannot access other versions offline!</div>
</div>
<div class="scrollToFeedback"><a id="scrollToFeedback">Leave feedback</a></div>
<h1 id="draft">Skinned Mesh Renderer</h1>
<!--BeginSwitchLink--><a href='../ScriptReference/SkinnedMeshRenderer.html' title='Go to SkinnedMeshRenderer page in the Scripting Reference' class='switch-link gray-btn sbtn left'>Switch to Scripting</a><!--EndSwitchLink-->
<div class="clear"></div>

<p>Unity uses the <strong>Skinned Mesh Renderer</strong> component to render <strong>Bone</strong> animations, where the shape of the Mesh is deformed by predefined animation sequences. This technique is useful for characters and other objects whose joints bend (as opposed to a machine where joints are more like hinges). </p>

<p>A Skinned Mesh Renderer is automatically added to any Mesh that needs it at import time.</p>

<h2>Properties</h2>

<figure>
<img src="../uploads/Main/Inspector-SkinnedMeshRenderer.png" alt="">
</figure>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong>Property:</strong></th>
	<th style="text-align:left;"><strong>Function:</strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><strong>Cast Shadows</strong></td>
	<td style="text-align:left;">If enabled, the Mesh will cast shadows when a suitable <a href="class-Light.html">Light</a> shines on it.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>Receive Shadows</strong></td>
	<td style="text-align:left;">If enabled, the Mesh will show shadows that are cast upon it by other objects.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>Motion Vectors</strong></td>
	<td style="text-align:left;">If enabled, the line has motion vectors rendered into the Camera motion vector Texture. See <a href="../ScriptReference/Renderer-motionVectors.html">Renderer.motionVectors</a> in the Scripting API reference documentation to learn more.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>Materials</strong></td>
	<td style="text-align:left;">The list of <strong>Materials</strong> the Mesh will be rendered with.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>Light Probes</strong></td>
	<td style="text-align:left;">Probe-based lighting interpolation mode.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>Reflection Probes</strong></td>
	<td style="text-align:left;">If enabled, and if Reflection Probes are present in the scene, a reflection Texture will be picked for this GameObject and set as a built-in Shader uniform variable.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>Anchor Override</strong></td>
	<td style="text-align:left;">A Transform used to determine the interpolation position when the Light Probe or Reflection Probe systems are used.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>Quality</strong></td>
	<td style="text-align:left;">Define the maximum number of bones used per vertex while skinning. The higher the number of bones, the higher the quality of the Renderer. Set the <strong>Quality</strong> to <strong>Auto</strong> to use the <strong>Blend Weights</strong> value from the <a href="class-QualitySettings.html">Quality Settings</a>.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>Skinned Motion Vectors</strong></td>
	<td style="text-align:left;">If enabled, the Mesh skinning data will be double buffered so that skinned motion can be interpolated and placed into the motion vector Texture. This has a GPU memory overhead, but leads to more correct motion vectors.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>Update When Offscreen</strong></td>
	<td style="text-align:left;">If enabled, the Skinned Mesh will be updated even when it can’t be seen by any Camera. If disabled, the animations themselves will also stop running when the GameObject is off-screen.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>Mesh</strong></td>
	<td style="text-align:left;">Use this to define the Mesh used by this Renderer.</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>Root Bone</strong></td>
	<td style="text-align:left;">Use this to define the bone that is the “root” of the animation (that is, the bone relative to which all the others move).</td>
</tr>
<tr>
	<td style="text-align:left;"><strong>Bounds</strong></td>
	<td style="text-align:left;">The bounding volume that is used to determine when the Mesh is offscreen. The bounds are pre-calculated on import from the Mesh and animations in the model file, and are displayed as a wireframe around the model in the Scene View.</td>
</tr>
</tbody>
</table>

<h2>Details</h2>

<p>
<strong>Bones</strong> are invisible objects inside a skinned Mesh that affect the way the Mesh is deformed during animation. The basic idea is that the bones are joined together to form a hierarchical “skeleton”, and the animation is defined by rotating the joints of the skeleton to make it move. Each bone is attached to some of the vertices of the surrounding Mesh. When the animation is played, the vertices move with the bone or bones they are connected to, so the “skin” follows the movement of the skeleton. At a simple joint (for example, an elbow), the Mesh vertices are affected by both of the bones that meet there, and the Mesh will stretch and rotate realistically as the joint bends. In more complex situations, more than two bones will affect a particular area of the Mesh, resulting in more subtle movements.</p>

<p>Although a skinned Mesh is most commonly used with predefined animations, it is also possible to attach <a href="class-Rigidbody.html">Rigidbody components</a> to each bone in a skeleton to put it under the control of the Physics engine. This is typically used to create the “ragdoll” effect, where a character’s limbs flail after being thrown or struck by an explosion.</p>

<h3>Quality</h3>

<p>Unity can skin every vertex with one, two or four bones. Using four bones gives the best results but this comes with a higher processing overhead. Games commonly use two bone weights, which is a good compromise between visual quality and performance.</p>

<p>If the <strong>Quality</strong> is set to <strong>Auto</strong>, the <strong>Blend Weights</strong> value from the <a href="class-QualitySettings.html">Quality Settings</a> are used. This allows end-users to choose the quality setting themselves and get the desired balance of animation quality and framerate.</p>

<h3>Update When Offscreen</h3>

<p>By default, skinned Meshes that are not visible to any camera are not updated. The skinning is not updated until the Mesh comes back on screen. This is done to save system resources.</p>

<p>The object’s visibility is determined from the Mesh’s <strong>Bounds</strong> (that is, the entire bounding volume must be outside the view of any active Camera). However, the true bounding volume of an animated Mesh can change as the animation plays (for example, the bounding volume will get taller if the character raises their hand in the air). Unity takes all attached animations into account when calculating the maximum bounding volume, but there are cases when the bounds can’t be calculated to anticipate every possible use case. </p>

<p>Each of the following example situations become a problem when they push bones or vertices out of the pre-calculated bounding volume:</p>

<ul>
<li>animations added at run-time</li>
<li>additive animations</li>
<li>procedurally changing the positions of bones from a script</li>
<li>using vertex shaders which can push vertices outside the pre-calculated bounds</li>
<li>using ragdolls</li>
</ul>

<p>In those cases, there are two solutions:</p>

<ol>
<li>Modify the Bounds to match the potential bounding volume of your Mesh</li>
<li>Enable <strong>Update When Offscreen</strong> to skin and render the skinned Mesh all the time</li>
</ol>

<p>You should usually use the first option, because it is better for performance. However, the second option is preferable if performance is not a major concern, or if you can’t predict the size of your bounding volume (for example, when using ragdolls).</p>

<p>In order to make Skinned Meshes work better with ragdolls, Unity will automatically remap the Skinned Mesh Renderer to the root bone on import. However Unity only does this if there is a single Skinned Mesh Renderer in the model file. This means that if you can’t attach all Skinned Mesh Renderers to the root bone or a child, and you use ragdolls, you should turn off this optimization.</p>

<h2>Importing skinned Meshes</h2>

<p>Currently, skinned Meshes can be imported from:</p>

<ul>
<li>Maya</li>
<li>Cinema4D</li>
<li>3D Studio Max</li>
<li>Blender</li>
<li>Cheetah 3D</li>
<li>XSI</li>
<li>Any tool that supports the FBX format</li>
</ul>

<p>On mobile devices, Unity handles skinning on the CPU with hand-coded NEON/VFP assembly. A limitation here is that normals and tangents are not normalized, so if you are writing your own Shaders, you should handle the normalization youself. However, if you are using <a href="SL-SurfaceShaders.html">Surface Shaders</a>, Unity automatically handles the normalization.</p>

<p>
<strong>Note:</strong> Optimized Meshes sort bones differently from non-optimized Meshes, resulting in potentially significant animation problems. This is because non-optimized Meshes rely on bone order to animate, while Optimized Meshes use the bone names and do not rely on bone order.</p>

<p>If you simply import the FBX file and use it, Unity will take care of the order of the transforms.</p>

<p>For advanced users, if you want to change <code>SkinnedMeshRenderer.sharedMesh</code>:</p>

<ol>
<li>In ‘non-optimized’ mode, you need to make sure that the <code>SkinnedMeshRenderer.bones</code> matches <code>SkinnedMeshRenderer.sharedMesh</code> in a strict way. The referenced Transforms should be there in the correct order.</li>
<li>In optimized mode, it’s much simpler; the rendering works as long as the avatar has the referenced bones. In this case, <code>SkinnedMeshRenderer.bones</code> is always empty.</li>
</ol>
<div class="feedbackbox" id="feedbackbox">
<div id="rating"><p>Did you find this page useful? Please give it a rating:<br><div id="ratecontent" class="c-rating"></div>
</p></div>
<div id="ratingThanks" style="display:none"><p>Thanks for rating this page!</p></div>
<div id="problem"><p><a name="problem" onclick="document.getElementById('problemType').style.display = '';document.getElementById('problem').style.display = 'none';">Report a problem on this page</a></p></div>
<div id="problemType" style="display:none"><p>What kind of problem would you like to report?<ul type="problems">
<li><a name="needcode" onclick="                                                             document.getElementById('problemType').style.display = 'none';                                                             document.getElementById('problemThanks').style.display = '';                                                             SendFeedback('problem-needcode',window.location.href,0);                                                             document.getElementById('problemFormDescription').value='Needs code samples.';                                                             document.getElementById('problemNeedCodeForm').style.display = ''                                                         ">This page needs code samples</a></li>
<li><a name="code" onclick="document.getElementById('problemType').style.display = 'none';                                                         document.getElementById('problemThanks').style.display = '';                                                         SendFeedback('problem-brokencode',window.location.href,0);                                                         document.getElementById('problemFormDescription').value='Code samples do not work.';                                                         document.getElementById('problemCodeForm').style.display = ''                                                         ">Code samples do not work</a></li>
<li><a name="missing" onclick="document.getElementById('problemType').style.display = 'none';                                                         document.getElementById('problemThanks').style.display = '';                                                         SendFeedback('problem-missing',window.location.href,0);                                                         document.getElementById('problemFormDescription').value='Missing information';                                                         document.getElementById('problemMissingForm').style.display = ''                                                         ">Information is missing</a></li>
<li><a name="incorrect" onclick="document.getElementById('problemType').style.display = 'none';                                                         document.getElementById('problemThanks').style.display = '';                                                         SendFeedback('problem-incorrect',window.location.href,0);                                                         document.getElementById('problemFormDescription').value='Incorrect information';                                                         document.getElementById('problemIncorrectForm').style.display = ''                                                         ">Information is incorrect</a></li>
<li><a name="unclear" onclick="document.getElementById('problemType').style.display = 'none';                                                         document.getElementById('problemThanks').style.display = '';                                                         SendFeedback('problem-unclear',window.location.href,0);                                                         document.getElementById('problemFormDescription').value='Unclear or confusing information';                                                         document.getElementById('problemUnclearForm').style.display = ''                                                         ">Information is unclear or confusing</a></li>
<li><a name="language" onclick="document.getElementById('problemType').style.display = 'none';                                                         document.getElementById('problemThanks').style.display = '';                                                         SendFeedback('problem-language',window.location.href,0);                                                         document.getElementById('problemFormDescription').value='Spelling or grammar error';                                                         document.getElementById('problemLanguageForm').style.display = ''                                                         ">There is a spelling/grammar error on this page</a></li>
<li><a name="other" onclick="document.getElementById('problemType').style.display = 'none';                                                         document.getElementById('problemThanks').style.display = '';                                                         SendFeedback('problem-other',window.location.href,0);                                                         document.getElementById('problemFormDescription').value='This page has a problem';                                                         document.getElementById('problemOtherForm').style.display = ''                                                         ">Something else</a></li>
</ul>
<p><known_issues><p>Is something described here not working as you expect it to? It might be a <b>Known Issue</b>. Please check with the Issue Tracker at <a href="https://issuetracker.unity3d.com">issuetracker.unity3d.com</a>.</p></known_issues></p>
</p></div>
<div id="problemThanks" style="display:none"><p>Thanks for letting us know! This page has been marked for review based on your feedback.<br><br>If you have time, you can provide more information to help us fix the problem faster.<br><br><a onclick="document.getElementById('problemMoreInfo').style.display = '';document.getElementById('problemThanks').style.display = 'none';">Provide more information</a><br>
</p></div>
<div id="problemMoreInfo" style="display:none">
<p id="problemNeedCodeForm" style="display:none">You've told us this page needs code samples. If you'd like to help us further, you could provide a code sample, or tell us about what kind of code sample you'd like to see:</p>
<p id="problemCodeForm" style="display:none">You've told us there are code samples on this page which don't work. If you know how to fix it, or have something better we could use instead, please let us know:</p>
<p id="problemMissingForm" style="display:none">You've told us there is information missing from this page. Please tell us more about what's missing:</p>
<p id="problemIncorrectForm" style="display:none">You've told us there is incorrect information on this page. If you know what we should change to make it correct, please tell us:</p>
<p id="problemUnclearForm" style="display:none">You've told us this page has unclear or confusing information. Please tell us more about what you found unclear or confusing, or let us know how we could make it clearer:</p>
<p id="problemLanguageForm" style="display:none">You've told us there is a spelling or grammar error on this page. Please tell us what's wrong:</p>
<p id="problemOtherForm" style="display:none">You've told us this page has a problem. Please tell us more about what's wrong:</p>
<form>
<textarea id="problemFormSuggestionField" cols="40" rows="5"></textarea><input type="hidden" id="problemFormDescription"><input type="submit" id="problemFormDescriptionSubmit" value="Submit" onclick="                                             document.getElementById('problemMoreInfo').style.display = 'none';                                             document.getElementById('problemMoreInfoThanks').style.display = '';                                             return false;                                             ">
</form>
</div>
<div id="problemMoreInfoThanks" style="display:none"><p>Thanks for helping to make the Unity documentation better!</p></div>
<script>

                                            var ratecontent = document.querySelector('#ratecontent'); // target element
                                            var currentRating = 0; // initial rating
                                            var maxRating= 5; // max rating

                                            // callback to run after setting the rating
                                            var callback = function(rating) {
                                                document.getElementById('ratingThanks').style.display = '';
                                                document.getElementById('ratecontent').style.display = 'none';
                                                document.getElementById('rating').style.display = 'none';
                                                SendFeedback("rating",window.location.href,rating);
                                            };

                                            // rating instance
                                            var myRating = rating(ratecontent, currentRating, maxRating, callback);
                                        </script>
</div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="class-MeshRenderer.html"></a></span><div class="tip"> Mesh Renderer</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="class-TextMesh.html"></a></span><div class="tip">Text Mesh</div>
</div>
</div>
</div>
</body></html>