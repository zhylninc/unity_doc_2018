<html><head><title>html模版</title></head><body>Unity - Manual: Scripting Runtime Upgrade</br>
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual (2018.1 beta)</a></li>
<li><a href="Experimental.html"> Experimental</a></li>
<li>Scripting Runtime Upgrade</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="LookDevEnvironmentShadow.html"></a></span><div class="tip"> Environment Shadow</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="ScriptableRenderPipeline.html"></a></span><div class="tip"> Scriptable render pipeline</div>
</div>
</div></div>
<div class="otherversionswrapper" onmouseover="setOtherVersionsDisplay(true)" onmouseout="setOtherVersionsDisplay(false)">
<a>Other Versions</a><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">Cannot access other versions offline!</div>
</div>
<div class="scrollToFeedback"><a id="scrollToFeedback">Leave feedback</a></div>
<h1>Scripting Runtime Upgrade</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>For 2017.1 the option to use .NET 4.6 will be an experimental, per project option. This option is in the GUI as a Player Setting above <strong>Scripting Backend</strong> and <strong>Api Compatibility Level</strong>:</p>

<figure>
<img src="../uploads/Main/ScriptingRunetimePreview.png" alt="">
</figure>

<p>The equivalent scripting API is the <strong>PlayerSettings.scriptingRuntimeVersion</strong> property. <strong>Note that changing this setting requires an Editor restart since it affects the Editor as well as players.</strong>
</p>

<p>By default nothing should change about how Unity behaves or what .NET functionality is available. Once you opt-in to the new .NET 4.6 for a project, you will be able to use C# 6, .NET 4.6 class libraries, and new runtime features in user scripts and precompiled assemblies.</p>

<h2>FAQ</h2>

<h3>What platforms does this affect?</h3>

<p>All of them, but in different ways:</p>

<ul>
<li><p>Editor and Standalone use the new version of Mono when this option is enabled.</p></li>
<li><p>All console platforms will only be able to use IL2CPP when targeting the new .NET version.</p></li>
<li><p>iOS and WebGL will continue to be IL2CPP only.</p></li>
<li><p>Android will continue to support both Mono and IL2CPP.</p></li>
<li><p>Other platforms are still undergoing work to support either new Mono or IL2CPP</p></li>
</ul>

<p><em>At the current time (2017.1b4) please focus on using this option on desktop, iOS, and Android. Support for other platforms is still under development.</em></p>

<h3>What about IL2CPP?</h3>

<p>IL2CPP fully supports the new .NET 4.6 APIs and features.</p>

<h3>How stable is the updated Mono/IL2CPP?</h3>

<p>The internal, automated tests for Unity pass with the new Mono/IL2CPP. Of course, we still expect you may encounter issues. Please file bugs for any issues you encounter.</p>

<h3>Does this preview include a new GC?</h3>

<p>No. This is an upgrade of the class libraries and runtime, but we are still using the Boehm GC. We are targeting a new version of Boehm that we use with IL2CPP (so IL2CPP and Mono will have exact same GC).</p>

<h3>Wait, why don’t we have a new GC?</h3>

<p>The newer Mono garbage collector (SGen) requires additional work in Unity and will follow once we have stabilized the new runtime and class libraries.</p>

<h3>Can I debug managed code with this new Mono?</h3>

<p>VSTU 3.1 is required for our new Mono. Please install it to use the new Mono runtime on Windows.</p>

<p>MonoDevelop currently cannot debug the new Mono runtime, but we are working to fix this.</p>

<h3>Why are my builds larger with the new .NET version?</h3>

<p>The .NET 4.6 class libraries are quite larger than our current .NET 3.5 class libraries. We are actively working on improving the managed linker to reduce size further.</p>

<p>Additionally, we are working on a new Unity specific class library API profile (like our current <strong>unity</strong> profile) that will</p>

<p>a) be specifically implemented to work on AOT platforms</p>

<p>b) smaller in surface area and internally designed to be strippable/linkable</p>

<p>c) support <a href="https://github.com/dotnet/standard/blob/master/docs/netstandard-20/README.md">netstandard 2.0</a> (yet to be officially released)</p>

<h3>When I try this new option, something doesn’t work. What should I do?</h3>

<p>Please file a bug. We will be rapidly fixing them!</p>

<hr>

<ul>
<li><p><span class="page-edit">2017–05–24 Page published with no <a href="DocumentationEditorialReview.html">editorial review</a>
</span></p></li>
<li><p><span class="page-history">New feature in Unity <a href="../Manual/30_search.html?q=newin20171">2017.1</a> <span class="search-words">NewIn20171</span></span></p></li>
</ul>
<div class="feedbackbox" id="feedbackbox">
<div id="rating"><p>Did you find this page useful? Please give it a rating:<br><div id="ratecontent" class="c-rating"></div>
</p></div>
<div id="ratingThanks" style="display:none"><p>Thanks for rating this page!</p></div>
<div id="problem"><p><a name="problem" onclick="document.getElementById('problemType').style.display = '';document.getElementById('problem').style.display = 'none';">Report a problem on this page</a></p></div>
<div id="problemType" style="display:none"><p>What kind of problem would you like to report?<ul type="problems">
<li><a name="needcode" onclick="                                                             document.getElementById('problemType').style.display = 'none';                                                             document.getElementById('problemThanks').style.display = '';                                                             SendFeedback('problem-needcode',window.location.href,0);                                                             document.getElementById('problemFormDescription').value='Needs code samples.';                                                             document.getElementById('problemNeedCodeForm').style.display = ''                                                         ">This page needs code samples</a></li>
<li><a name="code" onclick="document.getElementById('problemType').style.display = 'none';                                                         document.getElementById('problemThanks').style.display = '';                                                         SendFeedback('problem-brokencode',window.location.href,0);                                                         document.getElementById('problemFormDescription').value='Code samples do not work.';                                                         document.getElementById('problemCodeForm').style.display = ''                                                         ">Code samples do not work</a></li>
<li><a name="missing" onclick="document.getElementById('problemType').style.display = 'none';                                                         document.getElementById('problemThanks').style.display = '';                                                         SendFeedback('problem-missing',window.location.href,0);                                                         document.getElementById('problemFormDescription').value='Missing information';                                                         document.getElementById('problemMissingForm').style.display = ''                                                         ">Information is missing</a></li>
<li><a name="incorrect" onclick="document.getElementById('problemType').style.display = 'none';                                                         document.getElementById('problemThanks').style.display = '';                                                         SendFeedback('problem-incorrect',window.location.href,0);                                                         document.getElementById('problemFormDescription').value='Incorrect information';                                                         document.getElementById('problemIncorrectForm').style.display = ''                                                         ">Information is incorrect</a></li>
<li><a name="unclear" onclick="document.getElementById('problemType').style.display = 'none';                                                         document.getElementById('problemThanks').style.display = '';                                                         SendFeedback('problem-unclear',window.location.href,0);                                                         document.getElementById('problemFormDescription').value='Unclear or confusing information';                                                         document.getElementById('problemUnclearForm').style.display = ''                                                         ">Information is unclear or confusing</a></li>
<li><a name="language" onclick="document.getElementById('problemType').style.display = 'none';                                                         document.getElementById('problemThanks').style.display = '';                                                         SendFeedback('problem-language',window.location.href,0);                                                         document.getElementById('problemFormDescription').value='Spelling or grammar error';                                                         document.getElementById('problemLanguageForm').style.display = ''                                                         ">There is a spelling/grammar error on this page</a></li>
<li><a name="other" onclick="document.getElementById('problemType').style.display = 'none';                                                         document.getElementById('problemThanks').style.display = '';                                                         SendFeedback('problem-other',window.location.href,0);                                                         document.getElementById('problemFormDescription').value='This page has a problem';                                                         document.getElementById('problemOtherForm').style.display = ''                                                         ">Something else</a></li>
</ul>
<p><known_issues><p>Is something described here not working as you expect it to? It might be a <b>Known Issue</b>. Please check with the Issue Tracker at <a href="https://issuetracker.unity3d.com">issuetracker.unity3d.com</a>.</p></known_issues></p>
</p></div>
<div id="problemThanks" style="display:none"><p>Thanks for letting us know! This page has been marked for review based on your feedback.<br><br>If you have time, you can provide more information to help us fix the problem faster.<br><br><a onclick="document.getElementById('problemMoreInfo').style.display = '';document.getElementById('problemThanks').style.display = 'none';">Provide more information</a><br>
</p></div>
<div id="problemMoreInfo" style="display:none">
<p id="problemNeedCodeForm" style="display:none">You've told us this page needs code samples. If you'd like to help us further, you could provide a code sample, or tell us about what kind of code sample you'd like to see:</p>
<p id="problemCodeForm" style="display:none">You've told us there are code samples on this page which don't work. If you know how to fix it, or have something better we could use instead, please let us know:</p>
<p id="problemMissingForm" style="display:none">You've told us there is information missing from this page. Please tell us more about what's missing:</p>
<p id="problemIncorrectForm" style="display:none">You've told us there is incorrect information on this page. If you know what we should change to make it correct, please tell us:</p>
<p id="problemUnclearForm" style="display:none">You've told us this page has unclear or confusing information. Please tell us more about what you found unclear or confusing, or let us know how we could make it clearer:</p>
<p id="problemLanguageForm" style="display:none">You've told us there is a spelling or grammar error on this page. Please tell us what's wrong:</p>
<p id="problemOtherForm" style="display:none">You've told us this page has a problem. Please tell us more about what's wrong:</p>
<form>
<textarea id="problemFormSuggestionField" cols="40" rows="5"></textarea><input type="hidden" id="problemFormDescription"><input type="submit" id="problemFormDescriptionSubmit" value="Submit" onclick="                                             document.getElementById('problemMoreInfo').style.display = 'none';                                             document.getElementById('problemMoreInfoThanks').style.display = '';                                             return false;                                             ">
</form>
</div>
<div id="problemMoreInfoThanks" style="display:none"><p>Thanks for helping to make the Unity documentation better!</p></div>
<script>

                                            var ratecontent = document.querySelector('#ratecontent'); // target element
                                            var currentRating = 0; // initial rating
                                            var maxRating= 5; // max rating

                                            // callback to run after setting the rating
                                            var callback = function(rating) {
                                                document.getElementById('ratingThanks').style.display = '';
                                                document.getElementById('ratecontent').style.display = 'none';
                                                document.getElementById('rating').style.display = 'none';
                                                SendFeedback("rating",window.location.href,rating);
                                            };

                                            // rating instance
                                            var myRating = rating(ratecontent, currentRating, maxRating, callback);
                                        </script>
</div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="LookDevEnvironmentShadow.html"></a></span><div class="tip"> Environment Shadow</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="ScriptableRenderPipeline.html"></a></span><div class="tip"> Scriptable render pipeline</div>
</div>
</div>
</div>
</body></html>